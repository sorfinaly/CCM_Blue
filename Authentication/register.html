<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Register</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="center">
        <h1>Register</h1>
        <form method="post" action="register.php">
            <div class="txt_field">
                <label>Username</label>
                <input type="text" name="username" pattern="[a-zA-Z0-9_]{3,16}" placeholder="John Doe" required>
                <span></span>
            </div>
            <div class="txt_field">
                <label>Email Address</label>
                <input type="email" name="email" pattern="[a-z0-9._%+-]+@[a-z]+\.[a-z]{2,}$" placeholder="john@example.com" required>
                <span></span>
            </div>
            <div class="txt_field">
                <label>Phone Number</label>
                <input type="text" name="phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="012-345-6789" required>
                <span></span>
            </div>
            <div class="txt_field">
                <label>Password</label>
                <input type="password" id="password" name="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\W_]).{8,}" 
                       title="Password must be at least 8 characters long, contain at least one uppercase letter, one lowercase letter, one number, and one special character." required>
                <span></span>
            </div>
            <div class="txt_field">
                <label>Confirm Password</label>
                <input type="password" id="confirmPassword" name="confirmPassword" required>
                <span></span>
            </div>
            <div class="forgot">Already have an account? <a href="login.html">Login</a></div>
            <input type="submit" value="Register">
            <div id="errorMessage" style="color: red;"></div>
        </form>
    </div>

    <script src="register.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const errorMessage = document.getElementById("errorMessage");
            const params = new URLSearchParams(window.location.search);
            if (params.has('error')) {
                switch (params.get('error')) {
                    case 'empty_passwords':
                        errorMessage.textContent = "Passwords cannot be empty. Please try again.";
                        break;
                    case 'passwords_do_not_match':
                        errorMessage.textContent = "Passwords do not match. Please try again.";
                        break;
                    case 'prepare_failed':
                    case 'execute_failed':
                        errorMessage.textContent = "Registration failed. Please try again.";
                        break;
                    default:
                        errorMessage.textContent = "An unknown error occurred. Please try again.";
                }
            }
        });
    </script>
</body>
</html>
